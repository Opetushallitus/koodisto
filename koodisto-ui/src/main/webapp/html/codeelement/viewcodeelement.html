<script type="text/ng-template" id="confirmDeleteCodeElementModalContent.html">
    <div class="modal-header">
        <h3>{{'codeelement.editpage.modal.header' | i18n}}</h3>
    </div>
    <div class="modal-body">
        Olet poistamassa koodia {{ model.name }}, haluatko jatkaa?
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="okconfirmdeletecodeelement()">OK</button>
        <button class="btn btn-warning" ng-click="cancelconfirmdeletecodeelement()">Cancel</button>
    </div>
</script>

<div class="container">
    <div class="row-fluid">
        <div class="span12">
            <h1>{{'codeelement.viewpage.header' | i18n}}</h1>
        </div>
    </div>

    <div class="row-fluid">
        <div class="offset2 span10 pull-left">
            <h3>{{ model.name }}&nbsp;({{ model.codeElement.koodiArvo }})</h3>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.state' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codeElement.tila }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.name' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            <span ng-if="model.namefi != ''">{{ model.namefi }}<br></span>
            <span ng-if="model.namesv != ''">{{ model.namesv }}<br></span>
            <span ng-if="model.nameen != ''">{{ model.nameen }}<br></span>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.uri' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codeElement.resourceUri }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.version' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codeElement.versio }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.codevalue' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codeElement.koodiArvo }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.dateactive' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codeElement.voimassaAlkuPvm | date:'dd.MM.yyyy' }} -
            {{ model.codeElement.voimassaLoppuPvm | date:'dd.MM.yyyy' }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.shortname' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            <span ng-if="model.shortnamefi != ''">{{ model.shortnamefi }}<br></span>
            <span ng-if="model.shortnamesv != ''">{{ model.shortnamesv }}<br></span>
            <span ng-if="model.shortnameen != ''">{{ model.shortnameen }}<br></span>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.description' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            <span ng-if="model.descriptionfi != ''">{{ model.descriptionfi }}<br></span>
            <span ng-if="model.descriptionsv != ''">{{ model.descriptionsv }}<br></span>
            <span ng-if="model.descriptionen != ''">{{ model.descriptionen }}<br></span>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codeelement.viewpage.updated' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codeElement.paivitysPvm | date:'dd.MM.yyyy HH:mm' }}
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <accordion close-others="false">
                <accordion-group is-open="isopen" class="">
                    <accordion-heading>
                        <i class="pull-left" ng-class="{'icon-chevron-down': isopen, 'icon-chevron-right': !isopen}"></i> {{'codes.createpage.showextra' | i18n}}
                    </accordion-heading>
                    <div class="row-fluid">
                        <div class="span2">
                            {{'codeelement.createpage.instructions' | i18n}}
                        </div>
                        <div class="span10 pull-left bold">
                            {{ instructionsfi }}
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span2">
                            {{'codeelement.createpage.concept' | i18n}}
                        </div>
                        <div class="span10 pull-left bold">
                            {{ conceptfi }}
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span2">
                            {{'codeelement.createpage.totakenoticeof' | i18n}}
                        </div>
                        <div class="span10 pull-left bold">
                            {{ totakenoticeoffi }}
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span2">
                            {{'codeelement.createpage.containssignificance' | i18n}}
                        </div>
                        <div class="span10 pull-left bold">
                            {{ containssignificancefi }}
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span2">
                            {{'codeelement.createpage.doesnotcontainsignificance' | i18n}}
                        </div>
                        <div class="span10 pull-left bold">
                            {{ doesnotcontainsignificancefi }}
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span2">
                            {{'codeelement.createpage.containscodes' | i18n}}
                        </div>
                        <div class="span10 pull-left bold">
                            {{ containscodesfi }}
                        </div>
                    </div>

                </accordion-group>
            </accordion>
        </div>
    </div>

	<div class="row-fluid">
		<div class="span12">
			<span class="header">{{'codeelement.viewpage.relations.header' | i18n}}</span>
			<input id="filter_passive_relations" type="checkbox" ng-click="showPassive=!showPassive" /> 
            <label for="filter_passive">{{'codeelement.viewpage.relations.show.passive'| i18n}}</label>
		</div>
	</div>
    <div class="row-fluid">
        <div class="span9">
            <accordion close-others="oneAtATime">
                <accordion-group is-open="isopen" class="">
                    <accordion-heading>
                        <i class="pull-left" ng-class="{'icon-chevron-down': isopen, 'icon-chevron-right': !isopen}"></i> {{'codeelement.editpage.withincodeelements' | i18n}}
                    </accordion-heading>

                    <div class="row-fluid">
                        <div id="withincodes" class="span12" ng-show="model.withinCodeElements.length">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th ng:click="sortBy='codesname'" ng-class="{'sort-true': sortBy=='codesname'}">{{'codeelement.viewpage.tableheader1' | i18n}}</th>
                                    <th ng:click="sortBy='name'" ng-class="{'sort-true': sortBy=='name'}">{{'codeelement.viewpage.tableheader2' | i18n}}</th>
                                    <th ng:click="sortBy='versio'" ng-class="{'sort-true': sortBy=='versio'}">{{'codeelement.viewpage.version' | i18n}}</th>
                                    <th ng:click="sortBy='description'" ng-class="{'sort-true': sortBy=='description'}">{{'codeelement.viewpage.tableheader3' | i18n}}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr bindonce ng-repeat="codeElement in model.withinCodeElements | orderBy:sortBy | filter:showRelation">
                                    <td bo-text="codeElement.codesname" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.name" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.versio" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.description" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </accordion-group>
            </accordion>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span9">
            <accordion close-others="oneAtATime">
                <accordion-group is-open="isopen2" class="">
                    <accordion-heading>
                        <i class="pull-left" ng-class="{'icon-chevron-down': isopen2, 'icon-chevron-right': !isopen2}"></i> {{'codeelement.editpage.includescodeelements' | i18n}}
                    </accordion-heading>

                    <div class="row-fluid">
                        <div id="includescodes" class="span12" ng-show="model.includesCodeElements.length">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th ng:click="sortBy='codesname'" ng-class="{'sort-true': sortBy=='codesname'}">{{'codeelement.viewpage.tableheader1' | i18n}}</th>
                                    <th ng:click="sortBy='name'" ng-class="{'sort-true': sortBy=='name'}">{{'codeelement.viewpage.tableheader2' | i18n}}</th>
                                    <th ng:click="sortBy='versio'" ng-class="{'sort-true': sortBy=='versio'}">{{'codeelement.viewpage.version' | i18n}}</th>
                                    <th ng:click="sortBy='description'" ng-class="{'sort-true': sortBy=='description'}">{{'codeelement.viewpage.tableheader3' | i18n}}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr bindonce ng-repeat="codeElement in model.includesCodeElements | orderBy:sortBy | filter:showRelation">
                                    <td bo-text="codeElement.codesname" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.name" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.versio" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.description" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </accordion-group>
            </accordion>
        </div>
    </div>


    <div class="row-fluid">
        <div class="span9">
            <accordion close-others="oneAtATime">
                <accordion-group is-open="isopen3" class="">
                    <accordion-heading>
                        <i class="pull-left" ng-class="{'icon-chevron-down': isopen3, 'icon-chevron-right': !isopen3}"></i> {{'codeelement.editpage.levelswithcodeelements' | i18n}}
                    </accordion-heading>

                    <div class="row-fluid">
                    <div id="levelswithcodes" class="span12" ng-show="model.levelsWithCodeElements.length">
                        <table class="table">
                            <thead>
                            <tr>
                                <th ng:click="sortBy='codesname'" ng-class="{'sort-true': sortBy=='codesname'}">{{'codeelement.viewpage.tableheader1' | i18n}}</th>
                                <th ng:click="sortBy='name'" ng-class="{'sort-true': sortBy=='name'}">{{'codeelement.viewpage.tableheader2' | i18n}}</th>
                                <th ng:click="sortBy='versio'" ng-class="{'sort-true': sortBy=='versio'}">{{'codeelement.viewpage.version' | i18n}}</th>
                                <th ng:click="sortBy='description'" ng-class="{'sort-true': sortBy=='description'}">{{'codeelement.viewpage.tableheader3' | i18n}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr bindonce ng-repeat="codeElement in model.levelsWithCodeElements | orderBy:sortBy | filter:showRelation">
                                    <td bo-text="codeElement.codesname" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.name" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.versio" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                                    <td bo-text="codeElement.description" ng-class="codeElement.active ? '': 'passiveRelation'"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                </accordion-group>
            </accordion>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span9">
            <alert ng-repeat="alert in model.alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>
        </div>
    </div>

    <div class="row-fluid navbar-fixed-bottom">
        <div class="span12">
            <button type="button" class="btn pull-right" ng-click="cancel()" ng-disabled="!model.codeElement">{{'codes.back' | i18n}}
            </button>
            <button type="button" class="btn btn-primary pull-right" ng-click="model.removeCodeElement()" auth="crud" auth-service="APP_KOODISTO" auth-org="{{model.codeElement.koodisto.organisaatioOid}}" ng-disabled="model.deleteState">
                {{'codeelement.viewpage.deletebutton' | i18n}}&nbsp;<i class="icon-minus-sign"></i>
            </button>
            <button type="button" ng-click="editCodeElement()" auth="update" auth-service="APP_KOODISTO" auth-org="{{model.codeElement.koodisto.organisaatioOid}}" class="btn btn-primary pull-right" ng-disabled="model.editState">
                {{'codeelement.viewpage.editbutton' | i18n}}</button>
        </div>
    </div>


</div>