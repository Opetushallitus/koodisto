<script type="text/ng-template" id="downloadModalContent.html">
    <div class="modal-header">
        <h3>{{'codes.downloadmodal.header' | i18n}}</h3>
    </div>
    <div class="modal-body">
        <label for="fileFormat">{{'codes.downloadmodal.format' | i18n}}</label>
        <br>
        <select id="fileFormat" ng-model="model.format">
            <option value="JHS_XML">JHS_XML</option>
            <option value="CSV">CSV</option>
        </select>
        <br>
        <label for="fileEncoding">{{'codes.downloadmodal.encoding' | i18n}}</label>
        <br>
        <select id="fileEncoding" ng-model="model.encoding">
            <option value="UTF-8">UTF8</option>
            <option value="ISO-88519-1">ISO_88519_1</option>
            <option value="ISO-88519-15">ISO_88519_15</option>
        </select>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning" ng-click="canceldownload()">{{'codes.cancel' | i18n}}</button>
        <button class="btn btn-primary" ng-click="okdownload()">{{'codes.select' | i18n}}</button>
    </div>
</script>

<script type="text/ng-template" id="uploadModalContent.html">
    <div class="modal-header">
        <h3>{{'codes.uploadmodal.header' | i18n}}</h3>
    </div>
    <div class="modal-body">
        <label for="fileFormat2">{{'codes.downloadmodal.format' | i18n}}</label>
        <br>
        <select id="fileFormat2" ng-model="model.format">
            <option value="JHS_XML">JHS_XML</option>
            <option value="CSV">CSV</option>
        </select>
        <br>
        <label for="fileEncoding2">{{'codes.downloadmodal.encoding' | i18n}}</label>
        <br>
        <select id="fileEncoding2" ng-model="model.encoding">
            <option value="UTF-8">UTF8</option>
            <option value="ISO-88519-1">ISO_88519_1</option>
            <option value="ISO-88519-15">ISO_88519_15</option>
        </select>
        <br>
        <label for="fileToUpload">{{'codes.uploadmodal.selectfile' | i18n}}</label><br />
        <input type="file" ng-model-instant id="fileToUpload" onchange="angular.element(this).scope().setFiles(this)" />

    </div>
    <div class="modal-footer">
        <button class="btn btn-warning" ng-click="cancelupload()">{{'codes.cancel' | i18n}}</button>
        <button class="btn btn-primary" ng-click="okupload()">{{'codes.select' | i18n}}</button>
    </div>
</script>

<script type="text/ng-template" id="confirmModalContent.html">
    <div class="modal-header">
        <h3>{{'codes.createpage.modal.header' | i18n}}</h3>
    </div>
    <div class="modal-body">
        Olet poistamassa koodistojen {{ model.languageSpecificValue( model.codes.metadata , 'nimi', 'FI') }} ja {{ model.withinRelationToRemove.name || model.includesRelationToRemove.name || model.levelsRelationToRemove.name }} v&auml;list&auml; yhteytt&auml;
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="okconfirm()">OK</button>
        <button class="btn btn-warning" ng-click="cancelconfirm()">Cancel</button>
    </div>
</script>

<div class="container">
    <div class="row-fluid">
        <div class="span12">
            <h1>{{'codes.viewpage.header' | i18n}}</h1>
        </div>
    </div>

    <div class="row-fluid">
        <div class="offset2 span4">
            <h3>{{ model.languageSpecificValue( model.codes.metadata , 'nimi', 'FI') }}</h3>
        </div>
        <div class="span6">
            <button type="button" auth="update" auth-service="APP_KOODISTO" auth-org="{{model.codes.organisaatioOid}}" class="btn pull-left" ng-click="model.upload()">{{'codes.viewpage.uploadbutton' | i18n}}
            </button>
            <button type="button" class="btn pull-left" ng-click="model.download()">{{'codes.viewpage.downloadbutton' | i18n}}
            </button>
        </div>

    </div>

    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.state' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codes.tila }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.name' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.languageSpecificValue( model.codes.metadata , 'nimi', 'FI') }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.uri' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codes.resourceUri }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.codesgroup' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codes.codesGroupUri }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.version' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codes.versio }}
            <span ng-show="model.codes.codesVersions.length > 0">
                &nbsp;(&nbsp;<a href="#/koodisto/{{codesUri}}/{{codesVersion}}" ng-repeat="codesVersion in model.codes.codesVersions | orderBy:identity:true">{{ codesVersion }}&nbsp;</a>)
            </span>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.dateactive' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codes.voimassaAlkuPvm | date:'dd.MM.yyyy' }} -
            {{ model.codes.voimassaLoppuPvm | date:'dd.MM.yyyy' }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.description' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.languageSpecificValue( model.codes.metadata , 'kuvaus', 'FI') }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.organization' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codes.organizationName }}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.updated' | i18n}}
        </div>
        <div class="span10 pull-left bold">
            {{ model.codes.paivitysPvm | date:'dd.MM.yyyy HH:mm' }}
        </div>
    </div>

    <div class="row-fluid">
    <div class="span12">
    <accordion close-others="false">
    <accordion-group is-open="isopen" class="">
    <accordion-heading>
        <i class="pull-left" ng-class="{'icon-chevron-down': isopen, 'icon-chevron-right': !isopen}"></i> {{'codes.createpage.showextra' | i18n}}
    </accordion-heading>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.instructions' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.instructionsfi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.targetarea' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.targetareafi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.targetareapart' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.targetareapartfi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.concept' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.conceptfi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.operationalenvironment' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.operationalenvironmentfi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.codessource' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.codessourcefi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.specifiescodes' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.specifiescodesfi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.totakenoticeof' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.totakenoticeoffi }}
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                {{'codes.createpage.validitylevel' | i18n}}
            </div>
            <div class="span10 pull-left bold">
                {{ model.validitylevelfi }}
            </div>
        </div>
    </accordion-group>
    </accordion>
    </div>
    </div>



    <div class="row-fluid">
        <div class="span9">
            <accordion close-others="oneAtATime">
                <accordion-group is-open="isopen" class="">
                    <accordion-heading>
                        <i class="pull-left" ng-class="{'icon-chevron-down': isopen, 'icon-chevron-right': !isopen}"></i> {{'codes.editpage.withincodes' | i18n}}
                    </accordion-heading>

                    <div class="row-fluid">
                        <div id="withincodes" class="span12" ng-show="model.withinCodes.length">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>{{'codes.editpage.codes' | i18n}}</th>
                                    <th>{{'codes.delete' | i18n}}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="codes in model.withinCodes | orderBy:'name'">
                                    <td class="align-center">{{codes.name}}</td>
                                    <td class="align-center">
                                        <i class="icon-trash" auth="updateAny" auth-service="APP_KOODISTO" ng-click="model.removeFromWithinCodes(codes)"></i>
                                    </td>
                                </tr>

                                </tbody>

                            </table>
                            <a href="#/muokkaaKoodisto/{{model.codes.koodistoUri}}/{{model.codes.versio}}" auth="updateAny" auth-service="APP_KOODISTO" class="pull-right btn btn-primary">
                                {{'codeelement.viewpage.editrelationsbutton' | i18n}}</a>
                        </div>
                    </div>
                </accordion-group>
            </accordion>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span9">
            <accordion close-others="oneAtATime">
                <accordion-group is-open="isopen2" class="">
                    <accordion-heading>
                        <i class="pull-left" ng-class="{'icon-chevron-down': isopen2, 'icon-chevron-right': !isopen2}"></i> {{'codes.editpage.includescodes' | i18n}}
                    </accordion-heading>

                    <div class="row-fluid">
                        <div id="includescodes" class="span12" ng-show="model.includesCodes.length">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>{{'codes.editpage.codes' | i18n}}</th>
                                    <th>{{'codes.delete' | i18n}}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="codes in model.includesCodes | orderBy:'name'">
                                    <td class="align-center">{{codes.name}}</td>
                                    <td class="align-center">
                                        <i class="icon-trash" auth="updateAny" auth-service="APP_KOODISTO" ng-click="model.removeFromIncludesCodes(codes)"></i>
                                    </td>
                                </tr>

                                </tbody>

                            </table>
                            <a href="#/muokkaaKoodisto/{{model.codes.koodistoUri}}/{{model.codes.versio}}" auth="updateAny" auth-service="APP_KOODISTO" class="pull-right btn btn-primary">
                                {{'codeelement.viewpage.editrelationsbutton' | i18n}}</a>
                        </div>
                    </div>
                </accordion-group>
            </accordion>
        </div>
    </div>


    <div class="row-fluid">
        <div class="span9">
            <accordion close-others="oneAtATime">
                <accordion-group is-open="isopen3" class="">
                    <accordion-heading>
                        <i class="pull-left" ng-class="{'icon-chevron-down': isopen3, 'icon-chevron-right': !isopen3}"></i> {{'codes.editpage.levelswithcodes' | i18n}}
                    </accordion-heading>

                    <div class="row-fluid">
                        <div id="levelswithcodes" class="span12" ng-show="model.levelsWithCodes.length">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>{{'codes.editpage.codes' | i18n}}</th>
                                    <th>{{'codes.delete' | i18n}}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="codes in model.levelsWithCodes | orderBy:'name'">
                                    <td class="align-center">{{codes.name}}</td>
                                    <td class="align-center">
                                        <i class="icon-trash" auth="updateAny" auth-service="APP_KOODISTO" ng-click="model.removeFromLevelsWithCodes(codes)"></i>
                                    </td>
                                </tr>

                                </tbody>

                            </table>
                            <a href="#/muokkaaKoodisto/{{model.codes.koodistoUri}}/{{model.codes.versio}}" auth="updateAny" auth-service="APP_KOODISTO" class="pull-right btn btn-primary">
                                {{'codeelement.viewpage.editrelationsbutton' | i18n}}</a>
                        </div>
                    </div>
                </accordion-group>
            </accordion>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span2">
            {{'codes.viewpage.codeelements' | i18n}}
        </div>
        <div class="span10 pull-left">
            {{'codes.viewpage.codeelements.help' | i18n}}
        </div>
    </div>

    <div class="row-fluid">
        <div class="offset2 span10 form-inline">
            <input type="text" maxlength="50"
                   placeholder="{{'codes.viewpage.codeelements.search.placeholder' | i18n}}" ng-model="query"/>
            <input id="filter_version" type="checkbox" ng-model="model.showversion" ng-click="model.getCodeElementVersions()"/>
            <label for="filter_version">{{'codes.viewpage.codeelements.showversion' | i18n}}</label>
        </div>
    </div>

    <div class="row-fluid">
        <div ng-show="model.codeElements.length > 0" class="offset2 span6">
            <table class="table">
                <thead>
                <tr>
                    <th>{{'codes.viewpage.codeelements.tableheader1' | i18n}}</th>
                    <th>{{'codes.viewpage.codeelements.tableheader2' | i18n}}</th>
                    <th>{{'codes.viewpage.codeelements.tableheader3' | i18n}}</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="codeElement in model.codeElements | orderBy:'koodiArvo' | filter:search">
                    <td>
                        {{codeElement.koodiArvo}}
                    </td>
                    <td>
                        <a href="#/koodi/{{codeElement.koodiUri}}/{{codeElement.versio}}">{{codeElement.name}}</a>
                    </td>
                    <td>
                        {{codeElement.versio}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span9">
            <alert ng-repeat="alert in model.alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>
         </div>
    </div>

    <div class="row-fluid navbar-fixed-bottom">
        <div class="span12">
        <button type="button" class="btn pull-right" ng-click="cancel()">{{'codes.back' | i18n}}
        </button>
        <a href="#/lisaaKoodi/{{ codesUri }}/{{ model.codes.versio }}" auth="crud" auth-service="APP_KOODISTO" auth-org="{{model.codes.organisaatioOid}}" class="btn btn-primary pull-right">
            {{'codes.viewpage.codeelements.create' | i18n}}&nbsp;<i class="icon-plus-sign"></i></a>
        <a href="#/muokkaaKoodisto/{{ codesUri }}/{{ model.codes.versio }}" auth="update" auth-service="APP_KOODISTO" auth-org="{{model.codes.organisaatioOid}}" class="btn btn-primary pull-right">
            {{'codes.viewpage.editbutton' | i18n}}</a>
    </div>
    </div>
</div>